<!DOCTYPE html>
<html lang="en">
  <head>
<% currentTime = Time.now %>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0/dist/js/bootstrap.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
  </head>
<body class="h-100">

<div class="mx-5">
  
<div class="row mt-5 ">

<div class="col-5">
  <div style="box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;" class="card shadow rounded">
  <div class="card-header">
    <div class="d-flex">
 

   
<% if @description == 'sunny' %>
  <i class="fas fa-sun"></i> <!-- Display a sun icon for sunny weather -->

<% elsif @description.include?('cloud') %>
  <i class="fas fa-cloud"></i> <!-- Display a cloud icon for cloudy weather -->

<% elsif @description == 'rainy' %>
  <i class="fas fa-cloud-showers-heavy"></i> <!-- Display a rain icon for rainy weather -->

<% else %>
 <i class="fas fa-solid fa-temperature-half"></i> <!-- Display a question mark icon for unknown weather conditions -->

<% end %>
     <p class="pl-2 font-weight-bold mb-0"><%= currentTime.month.to_s + '/' + currentTime.day.to_s + '/' + currentTime.year.to_s %></p>
 </div>




  <h6>Weather for:</h6>
    <h4 class="font-weight-bold"> <%= @location_city %>, <%= @location_state %></span></h4>
  </div>
  <div class="card-body">
<h3><%= @temperature %>Â°F</h3>
<h6 class="font-weight-bold text-secondary"><%= @description.upcase %></h6>
<div class="row">
  <div class="col-6">
<h6>High Today:<i class="fa-solid fa-up-long text-success"></i> <%= @temp_max %></h6>
</div>
<div class="col-6">
<h6>Low Today:<i class="fa-solid fa-down-long text-danger"></i> <%= @temp_min %></h6>
</div>
</div>
</div>
</div>
</div>
<div class="col-7">
  <h2>Week Forecast:</h2>


<% first_parts = @weeklyForecast['list'].map { |obj| obj['dt_txt'].split(' ').first } %>

<% unique_dates = first_parts.uniq %>


 <div id="forecastFutureDays" class="row">
 <% unique_dates.each do |date| %>
 


 
  
 <% weeklyForecastByDay = @weeklyForecast['list'].filter { |item| item['dt_txt'].split(' ').first  == date } %>
 <% max_temperature_obj = weeklyForecastByDay.max_by { |data| data["temp_max"] }['main']['temp_max']   %>
  <% min_temperature_obj = weeklyForecastByDay.min_by { |data| data["temp_max"] }['main']['temp_min']   %>
 



  <div class="col-2">
    
     <h4><%= Time.parse(date).strftime("%A") %></h4>
    <h6>Max:<%= max_temperature_obj %></h6>
   <h6>Min:<%= min_temperature_obj%></h6>
    
</div>
  
  

   
<% end %>
 </div>


</div>
</div>




</div>
  <footer class="fixed-bottom mt-auto bg-dark text-light text-center py-3">
    <div class="container">
      <p>&copy; 2023 Courtney Jo Zuboski's Weather App</p>
    </div>
  </footer>

</body>
<script>



  
</script>

</html>

